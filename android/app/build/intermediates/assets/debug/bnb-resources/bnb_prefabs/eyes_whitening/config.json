{
    "apply_order": 40,
    "depends": ["camera"],
    "assets": {
        "attachments": {
            "eyes_camera_color": {"type": "color"}
        },
        "faces": {
            "face:@face_idx": {
                    "index": @face_idx,
                    "mesh" : "face_stream:@face_idx"
            }
        },
        "images":
        {
            "eyes_whitening_lut": {
                "file_name": "/bnb_prefabs/eyes_whitening/images/lut3d_eyes_high.png",
                "type": "lut",
                "weight": 1
            }
        },
        "meshes": {
            "face_stream:@face_idx": "$builtin$meshes/face.stream:@face_idx"
        },
        "materials": {
            "eyes_whitening/shaders/whitening": 
            {
                "path": "/bnb_prefabs/eyes_whitening/shaders/whitening",
                "samplers": 
                [
                    { "name": "tex_camera", "image": "eyes_camera_color" },
                    { "name": "tex_whitening", "image": "eyes_whitening_lut" }
                ],
                "state": { "blend": "alpha", "backfaces": true, "colorwrite": true, "ztest": false, "zwrite": false },
                "parameters": {
                    "@whitening_strength": { "type": "vec4", "value": [0, 0, 0, 0] }
                }
            }
        }
    },
    "components": {
        "face_tracker:@face_idx": {
            "face": "face:@face_idx",
            "type": "face_tracker"
        }
    },
    "entities": {
        "eyes_whitening:@face_idx":{ "components": { "mesh_instance":{ "mesh": "face_stream:@face_idx", "materials": [ "eyes_whitening/shaders/whitening" ]}},"layer": "eyes_whitening:@face_idx"},
        "face_tracker:@face_idx": {
            "components": ["face_tracker:@face_idx"]
        }
    },
    "hierarchy": {
        "face_tracker:@face_idx": [
            "eyes_whitening:@face_idx"
        ],
        "root": [
            "face_tracker:@face_idx"
        ]
    },
    "render_list": {
        "default": [
            { "layer": "camera_layer", "render_target": "eyes_camera_color" },
            { "layer": "eyes_whitening:@face_idx", "render_target": "base_rt" }
        ]
    },
    "render_targets": 
    {
        "eyes_camera_color": { "attachments": [ "eyes_camera_color" ]}
    },
    "script": "/bnb_prefabs/eyes_whitening/scripts/index.js"
}
